<div *ngIf="ordersPriorityData" class="container">
  <div class="row mt-3 mb-1">
    <div class="col-3">
      <div style="display: flex; align-items: baseline">
        <mat-form-field style="width: 100%">
          <mat-label>Фильтр по заказу</mat-label>
          <input type="number" matInput [(ngModel)]="orderFilter" (ngModelChange)="filterUpdate()">
        </mat-form-field>
        <button mat-icon-button color="primary" (click)="orderFilter=0;filterUpdate()">
          <mat-icon>clear</mat-icon>
        </button>
      </div>
    </div>
    <div class="col-3">
      <div style="display: flex; align-items: baseline">
        <mat-form-field style="width: 100%">
          <mat-label>Фильтр по артикулу</mat-label>
          <input type="text" matInput [(ngModel)]="articleFilter" (ngModelChange)="filterUpdate()">
        </mat-form-field>
        <button mat-icon-button color="primary" (click)="articleFilter='';filterUpdate()">
          <mat-icon>clear</mat-icon>
        </button>

      </div>
    </div>
    <div class="col-1 offset-2">
      <button mat-raised-button class="h-75" color="primary" (click)="save()">Сохранить изменения</button>
    </div>
  </div>
  <div class="row">
    <div class="col-3">

      <div *ngFor="let op of orders; let i=index" class="priority-item" [@indexChanged]>
        <div style="font-size: 16px;">
          Заказ: <a class="priority-filter-link" (click)="orderClick(op.orderNumber)">{{ op.orderNumber }}</a>
        </div>

        <div style="display: flex; justify-content: space-between; align-items: center">
          <div style="font-size: 14px">
            Приоритет:
          </div>
          <div style="display: flex; justify-content: center; align-items: center">

            <button mat-icon-button color="primary" (click)="changeOrderPriority(op.orderNumber,-1)">
              <mat-icon>remove_circle</mat-icon>
            </button>
            <div [@valueChanged]="op.priority" style="border-radius: 20px; margin: 5px; padding: 3px 5px">
              {{ op.priority }}
            </div>

            <button mat-icon-button color="primary" (click)="changeOrderPriority(op.orderNumber,1)">
              <mat-icon>add_circle</mat-icon>
            </button>

          </div>

        </div>
      </div>
    </div>
    <div class="col-8">
      <div class="row">
        <div *ngFor="let a of this.articles; let i = index" class="priority-item col-3" [@indexChanged]>
          <div style="font-size: 16px">
            Артикул: <a class="priority-filter-link" (click)="articleClick(a.article)">{{ a.article }}</a>
          </div>
          <div style="font-size: 16px">
            Заказ: <a class="priority-filter-link" (click)="orderClick(a.orderNumber)">{{ a.orderNumber }}</a>
          </div>

          <div style="display: flex; justify-content: space-between; align-items: center">
            <div style="font-size: 14px">
              Приоритет:
            </div>
            <div style="display: flex; justify-content: center; align-items: center">
              <button mat-icon-button color="primary" (click)="changeArticlePriority(a.orderNumber, a.article, -1)">
                <mat-icon>remove_circle</mat-icon>
              </button>
              <div [@valueChanged]="a.priority" style="border-radius: 20px; margin: 5px; padding: 3px 5px">
                {{ a.priority }}
              </div>

              <button mat-icon-button color="primary" (click)="changeArticlePriority(a.orderNumber, a.article, 1)">
                <mat-icon>add_circle</mat-icon>
              </button>

            </div>

          </div>



        </div>
      </div>



    </div>
  </div>

</div>
